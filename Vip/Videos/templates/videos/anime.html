<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
  {% load staticfiles %}
  <title>视频播放</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link href="{% static 'css/bootstrap.min.css' %}" rel='stylesheet' type='text/css' media="all" />
  <link href="{% static 'css/dashboard.css' %}" rel="stylesheet">
  <link href="{% static 'css/navstyle.css' %}" rel='stylesheet' type='text/css' media="all" />
  <script src="{% static 'js/jquery-1.10.2.js' %}"></script>
  <script src="{% static 'js/jquery-1.11.1.min.js' %}"></script>
  {% if "computer" == device %}
    <script src="{% static 'js/tagSelect.js' %}"></script>
    <link href="{% static 'css/common.css' %}" rel='stylesheet' type='text/css' media="all" />
    <link href="{% static 'css/computer-style.css' %}" rel='stylesheet' type='text/css' media="all" />
  {% endif %}
  {% if "mobile" == device %}
    <link href="{% static 'css/mobile-style.css' %}" rel='stylesheet' type='text/css' media="all" />
  {% endif %}
  <script type="application/x-javascript">
  addEventListener("load", function() {
    setTimeout(hideURLbar, 0);
  }, false);
   function hideURLbar()
   { window.scrollTo(0,1);
   } </script>
</head>
  <body id='f-nav2'>
    {% if "computer" == device %}
     <div class="box" >
      <ul class="f-nav"  >
	        <li onclick="tiao('main');">首页</li>
	        <li onclick="tiao('movie');">电影</li>
	        <li class="fontNav" onclick="tiao('anime');">动漫</li>
	        <li onclick="tiao('tv');">电视剧</li>
	        <!-- <li onclick="tiao('documentary');">纪录片</li> -->
	       <div class='sideline'></div>
  	</ul>
  </div>
  <div class="top-search">
    <form class="navbar-form navbar-right" action="search">
      <!-- {% csrf_token %} -->
      <input type="text" class="form-control" id="form-control" name="form-control" placeholder="Search...">
      <input type="submit" value=" ">
    </form>
  </div>
      <script type="text/javascript" src="{% static 'js/jquery-nav.js' %}"></script>
      <script type="text/javascript">
      	$('#f-nav2').tooltip({
      		default: 0,
      		type: 'fontUp',
      		width: '150',
      	});
        function tiao(url){
          window.location.href=url;
        }
      </script>
      {% endif %}
    {% if "mobile" == device %}
        <div class="col-sm-3 col-md-2 sidebar"  style="position: fixed;top:0;z-index:9999;">
			<div class="top-navigation">
				<div class="t-menu">MENU</div>
				<div class="t-img">
					<img src="{% static 'images/lines.png' %}" alt="" />
				</div>
				<div class="clearfix"> </div>
			</div>
				<div class="drop-navigation drop-navigation">
				  <ul class="nav nav-sidebar">
					<li><a href="main" class="home-icon">首页</a></li>
					<li><a href="movie" class="user-icon">电影</a></li>
					<li class="active"><a href="anime" class="sub-icon">动漫</a></li>
					<li><a href="tv" class="menu1">电视剧</a></li>
					<!-- <li><a href="main" class="menu">纪录片</a></li> -->
				  </ul>
						<script>
							$( ".top-navigation" ).click(function() {
							$( ".drop-navigation" ).slideToggle( 300, function() {
							});
							});
						</script>
				</div>
        </div>
        {% endif %}
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          {% if "mobile" == device %}
          <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container-fluid">
            <div id="navbar" class="navbar-collapse collapse">
    			<div class="top-search">
    				<form class="navbar-form navbar-right" action="search">
              <!-- {% csrf_token %} -->
    					<input type="text" class="form-control" id="form-control" name="form-control" placeholder="Search...">
    					<input type="submit" value=" ">
    				</form>
    			</div>
            </div>
          </div>
         </nav>
         {% endif %}
{% if "computer" == device %}
      <script>
          $(function(){
              new SelectTag({
                  child : ".sx_child", //所有筛选范围内的子类
                  over : 'on', //选中状态样式名称
                  all : ".all"
              });
          })
      </script>
         <div class="filter">
             <div class="container" style="padding-left: 0 !important;">
                 <div class="boxbox">
                 <div class="title-h">按条件筛选</div>
                 <dl>
                     <dt>类型：</dt>
                     <dd>

                         <a href="#" rel="全部" name="mode" class="all on">全部</a>
                         <a href="#" rel="原创" name="mode" class="sx_child">原创</a>
                         <a href="#" rel="漫改" name="mode" class="sx_child">漫改</a>
                         <a href="#" rel="轻改" name="mode" class="sx_child">轻改</a>
                         <a href="#" rel="游戏改" name="mode" class="sx_child">游戏改</a>
                         <a href="#" rel="搞笑" name="mode" class="sx_child">搞笑</a>
                         <a href="#" rel="经典" name="mode" class="sx_child">经典</a>
                         <a href="#" rel="热血" name="mode" class="sx_child">热血</a>
                         <a href="#" rel="催泪" name="mode" class="sx_child">催泪</a>
                         <a href="#" rel="治愈" name="mode" class="sx_child">治愈</a>
                         <a href="#" rel="猎奇" name="mode" class="sx_child">猎奇</a>
                         <a href="#" rel="致郁" name="mode" class="sx_child">致郁</a>
                         <a href="#" rel="励志" name="mode" class="sx_child">励志</a>
                         <a href="#" rel="装逼" name="mode" class="sx_child">装逼</a>
                         <a href="#" rel="战斗" name="mode" class="sx_child">战斗</a>
                         <a href="#" rel="后宫" name="mode" class="sx_child">后宫</a>
                         <a href="#" rel="机战" name="mode" class="sx_child">机战</a>
                         <a href="#" rel="基腐" name="mode" class="sx_child">基腐</a>
                         <a href="#" rel="恋爱" name="mode" class="sx_child">恋爱</a>
                         <a href="#" rel="百合" name="mode" class="sx_child">百合</a>
                         <a href="#" rel="科幻" name="mode" class="sx_child">科幻</a>
                         <a href="#" rel="乙女" name="mode" class="sx_child">乙女</a>
                         <a href="#" rel="奇幻" name="mode" class="sx_child">奇幻</a>
                         <a href="#" rel="推理" name="mode" class="sx_child">推理</a>
                         <a href="#" rel="运动" name="mode" class="sx_child">运动</a>
                         <a href="#" rel="智斗" name="mode" class="sx_child">智斗</a>
                         <a href="#" rel="日常" name="mode" class="sx_child">日常</a>
                         <a href="#" rel="魔法" name="mode" class="sx_child">魔法</a>
                         <a href="#" rel="历史" name="mode" class="sx_child">历史</a>
                         <a href="#" rel="美食" name="mode" class="sx_child">美食</a>
                         <a href="#" rel="职场" name="mode" class="sx_child">职场</a>
                         <a href="#" rel="神魔" name="mode" class="sx_child">神魔</a>
                         <a href="#" rel="偶像" name="mode" class="sx_child">偶像</a>
                         <a href="#" rel="萌系" name="mode" class="sx_child">萌系</a>
                         <a href="#" rel="伪娘" name="mode" class="sx_child">伪娘</a>
                         <a href="#" rel="美少女" name="mode" class="sx_child">美少女</a>
                         <a href="#" rel="萝莉" name="mode" class="sx_child">萝莉</a>
                         <a href="#" rel="声控" name="mode" class="sx_child">声控</a>
                         <a href="#" rel="亲子" name="mode" class="sx_child">亲子</a>
                         <a href="#" rel="泡面" name="mode" class="sx_child">泡面</a>
                         <a href="#" rel="青春" name="mode" class="sx_child">青春</a>
                         <a href="#" rel="冒险" name="mode" class="sx_child">冒险</a>
                         <a href="#" rel="竞技" name="mode" class="sx_child">竞技</a>
                         <a href="#" rel="战争" name="mode" class="sx_child">战争</a>
                         <a href="#" rel="社会" name="mode" class="sx_child">社会</a>
                         <a href="#" rel="音乐" name="mode" class="sx_child">音乐</a>
                         <a href="#" rel="合家欢" name="mode" class="sx_child">合家欢</a>
                         <a href="#" rel="玄幻" name="mode" class="sx_child">玄幻</a>
                         <a href="#" rel="魔幻" name="mode" class="sx_child">魔幻</a>
                          <a href="#" rel="跟播新番" name="mode" class="sx_child">跟播新番</a>
                         <a href="#" rel="腾讯出品" name="mode" class="sx_child">腾讯出品</a>
                         <a href="#" rel="芒果出品" name="mode" class="sx_child">芒果出品</a>
                        <a href="#" rel="其他" name="mode" class="sx_child">其他</a>

                     </dd>
                 </dl>
                 <dl>
                     <dt>地区：</dt>
                     <dd>
                         <a href="#" rel="" name="stage" class="all on">全部</a>
                         <a href="#" rel="内地" name="stage" class="sx_child">内地</a>
                         <a href="#" rel="香港" name="stage" class="sx_child">中国香港</a>
                         <a href="#" rel="台湾" name="stage" class="sx_child">中国台湾</a>
                         <a href="#" rel="美国" name="stage" class="sx_child">美国</a>
                         <a href="#" rel="欧洲" name="stage" class="sx_child">欧洲</a>
                         <a href="#" rel="韩国" name="stage" class="sx_child">韩国</a>
                         <a href="#" rel="日本" name="stage" class="sx_child">日本</a>
                         <a href="#" rel="泰国" name="stage" class="sx_child">泰国</a>
                         <a href="#" rel="印度" name="stage" class="sx_child">印度</a>
                         <a href="#" rel="加拿大" name="stage" class="sx_child">加拿大</a>
                         <a href="#" rel="英国" name="stage" class="sx_child">英国</a>
                         <a href="#" rel="法国" name="stage" class="sx_child">法国</a>
                         <a href="#" rel="德国" name="stage" class="sx_child">德国</a>
                         <a href="#" rel="西班牙" name="stage" class="sx_child">西班牙</a>
                         <a href="#" rel="意大利" name="stage" class="sx_child">意大利</a>
                         <a href="#" rel="俄罗斯" name="stage" class="sx_child">俄罗斯</a>
                         <a href="#" rel="澳大利亚" name="stage" class="sx_child">澳大利亚</a>
                         <a href="#" rel="其他" name="stage" class="sx_child">其他</a>
                     </dd>
                 </dl>
                 <dl>
                     <dt>年代：</dt>
                     <dd>
                         <a href="#" rel="" name="sector" class="all on">全部</a>
                         <a href="#" rel="2018" name="sector" class="sx_child">2018</a>
                         <a href="#" rel="2017" name="sector" class="sx_child">2017</a>
                         <a href="#" rel="2016" name="sector" class="sx_child">2016</a>
                         <a href="#" rel="2015" name="sector" class="sx_child">2015</a>
                         <a href="#" rel="2014" name="sector" class="sx_child">2014</a>
                         <a href="#" rel="2013" name="sector" class="sx_child">2013</a>
                         <a href="#" rel="2012" name="sector" class="sx_child">2012</a>
                         <a href="#" rel="2011" name="sector" class="sx_child">2011</a>
                         <a href="#" rel="2010-2001" name="sector" class="sx_child">2010-2001</a>
                         <a href="#" rel="2000-1991" name="sector" class="sx_child">2000-1991</a>
                         <a href="#" rel="1990-1981" name="sector" class="sx_child">1990-1981</a>
                         <a href="#" rel="80年代前" name="sector" class="sx_child">80年代前</a>
                     </dd>
                 </dl>
                 <dl>
                     <dt>语言：</dt>
                     <dd>
                         <a href="#" rel="" name="board" class="all on">全部</a>
                         <a href="#" rel="普通话" name="board" class="sx_child">普通话</a>
                         <a href="#" rel="华语" name="board" class="sx_child">华语</a>
                         <a href="#" rel="粤语" name="board" class="sx_child">粤语</a>
                         <a href="#" rel="英语" name="board" class="sx_child">英语</a>
                         <a href="#" rel="韩语" name="board" class="sx_child">韩语</a>
                         <a href="#" rel="日语" name="board" class="sx_child">日语</a>
                         <a href="#" rel="法语" name="board" class="sx_child">法语</a>
                         <a href="#" rel="德语" name="board" class="sx_child">德语</a>
                         <a href="#" rel="俄语" name="board" class="sx_child">俄语</a>
                         <a href="#" rel="泰语" name="board" class="sx_child">泰语</a>
                         <a href="#" rel="台语" name="board" class="sx_child">台语</a>
                         <a href="#" rel="印度语" name="board" class="sx_child">印度语</a>
                         <a href="#" rel="比利时语" name="board" class="sx_child">比利时语</a>
                         <a href="#" rel="其他" name="board" class="sx_child">其他</a>

                     </dd>
                 </dl>
                 </div>
             </div>
         </div>
{% endif %}
<style>
    .recommended-grid-info a:hover {
    border-color: #ff920b;
    color: #ff920b;
    }
    .recommended-grid-info a:link,.recommended-grid-info a:visited{
     text-decoration:none !important;
    }
    {% if "mobile" == device %}
    .recommended-grid-img img{
      height: 270px !important;
    }
    {% else %}
    .recommended-grid-img img{
      height: 370px !important;
    }
    {% endif %}
</style>

  					<div class="recommended-grids" style="margin: 0em !important;">
  						<div  id="top" class="callbacks_container">
  							<ul class="rslides" id="slider0">
  								<li>
  									<div class="animated-grids" id="contenttext">
                      {% for anim in anime|slice:":30" %}
  										<div class="col-md-3 resent-grid recommended-grid slider-first" style="padding-top: 20px !important;">
  											<div class="resent-grid-img recommended-grid-img">
  												<a href="playing{{ anim.id }}type1" target="_blank">
                            <img src="//{{ anim.animeimageurl }}" alt="" />
                          </a>
  											</div>
  											<div class="resent-grid-info recommended-grid-info">
  												<h5 style="text-align: center !important;"><a href="playing{{ anim.id }}type1"  target="_blank" class="title" style="color: #21DEEF !important;">{{ anim.animename }}</a></h5>
  											</div>
  										</div>
                      {% endfor %}
  									</div>
  								</li>
  							</ul>
                <style>
                .mod_pages {
                  margin: 49px auto;
                  text-align: center;
                  font-size: 25 !important;
              }
              .mod_pages .disabled {
              opacity: .5;
              filter: alpha(opacity=50);
              cursor: default;
            }
            .mod_pages .page_prev {
                margin-right: 15px;
            }
                .mod_pages a {
                    display: inline-block;
                    min-width: 10px;
                    height: 30px;
                    margin: 0 5px;
                    padding: 0 10px;
                    line-height: 30px;
                    border: 1px solid #D8D8D8;
                    text-align: center;
                    border-radius: 2px;
                    font-size: 14px;
                    color: #5A5A5A;
                }
                .mod_pages .page_next {
                    margin-left: 15px;
                }
                .mod_pages .current, .mod_pages .current:hover {
                    background-color: #ff920b;
                    border-color: #ff920b;
                    color: #fff;
                }
                .mod_pages a:hover {
    border-color: #ff920b;
    color: #ff920b;
}
                .mod_pages a:link,.mod_pages a:visited{
                 text-decoration:none;
                }
                </style>

                <div class="mod_pages" r-notemplate="true">
                  {% if page != 1 %}
                    <a href="javascript:;" onclick="ajaxLogin(1);" class="page_prev" id="prevpage">上一页</a>
                  {% else %}
                  <a href="javascript:;" onclick="ajaxLogin(1);" class="page_prev disabled" id="prevpage">上一页</a>
                  {% endif %}
                		<span class="_items" id="_items">
                      <input type='hidden' name='page' id="page" value='{{page}}' />
                      <input type='hidden' name='countpage' id="countpage" value='{{countpage}}' />
                			<a href="javascript:;" id="apage" class="disabled">当前{{page}}页</a>
                      <a href="javascript:;" class="disabled">总共{{countpage}}页</a>
                		</span>
                    {% if page != countpage %}
                			<a href="javascript:;" onclick="ajaxLogin(0);" class="page_next" id="nextpage">下一页</a>
                    {% else %}
                      <a href="javascript:;" onclick="ajaxLogin(0);" class="page_next disabled"  id="nextpage">下一页</a>
                    {% endif %}
                	</div>
                  <script>
                function ajaxLogin(updn){
                  var countpage = parseInt($("#countpage").val());
                  var npage = parseInt($("#page").val());

                  var animetype = '{{ dic.animetype }}';
                  var animeregion = '{{ dic.animeregion }}';
                  var animedecade = '{{ dic.animedecade }}';
                  var animelanguage = '{{ dic.animelanguage }}';


                  if((npage>1&&updn==1)||(updn==0&&npage<countpage)){
                  $.ajax({
                     type:'POST',
                     url:'/pageindex/',
                     data:{
                        csrfmiddlewaretoken:'{{ csrf_token }}',
                        type:animetype,
                        region:animeregion,
                        decade:animedecade,
                        language:animelanguage,
                        pageupdn:updn,
                        page:npage,
                        countpage:{{countpage}},
                        urltype:'anime'
                    },
                     dataType:'json',
                     success:function(ret)
                    {
                      var element=document.getElementById("contenttext");
                      var pageelement = document.getElementById('page');
                      var apageelement = document.getElementById('apage');
                      var sapageelement = document.getElementById('prevpage');
                      var xapageelement = document.getElementById('nextpage');
                      var aa,bb,cc,dd,ee,ff,gg,hh,ii,jj,kk,ll,mm,nn;
                      var cont = ''
                      for(var i=0;i<(ret.info).length;i++){
                        aa = '<div class="col-md-3 resent-grid recommended-grid slider-first" style="padding-top: 20px !important;">'
            						bb = '<div class="resent-grid-img recommended-grid-img">'
            						cc = '<a href="playing'+ret.info[i].id+'type1"  target="_blank">'
                        dd = '<img src="//'+ret.info[i].animeimageurl+'" alt="" />'
                        ee = '</a>'
            						ff = '</div>'
            						gg = '<div class="resent-grid-info recommended-grid-info">'
            						hh = '<h5 style="text-align: center !important;"><a href="playing'+ret.info[i].id+'type1"  target="_blank" class="title" style="color: #21DEEF !important;">'+ret.info[i].animename+'</a></h5>'
            						ii = '</div>'
            						jj = '</div>'
                        cont += aa+bb+cc+dd+ee+ff+gg+hh+ii+jj;
                      }
                        element.innerHTML=cont;
                        pageelement.value=ret.pagenum;
                        apageelement.innerHTML="当前"+ret.pagenum+"页";
                        if (ret.pagenum < countpage){
                          var value = xapageelement.className;
                          if(value.indexOf("disabled") >= 0){
                            $("#nextpage").removeClass("disabled");
                          }
                        }else{
                          var value = xapageelement.className;
                          if(value.indexOf("disabled") < 0){
                            xapageelement.className += ' disabled';
                          }
                        }
                        if (ret.pagenum > 1){
                          var value = sapageelement.className;
                          // alert(value);
                          if(value.indexOf("disabled") >= 0){
                            $("#prevpage").removeClass("disabled");
                          }
                        }else{
                          var value = sapageelement.className;
                          if(value.indexOf("disabled") < 0){
                            sapageelement.className += ' disabled';
                          }
                        }




                var url=window.location.href;
                    var stateObject = {};
                    var title = "视频播放";
                    var newUrl = "";
                    if(url.indexOf("?") != -1){
                        url = url.split("?")[0];
                        newUrl = url + "?page="+ret.pagenum;
                        if (animetype!=""){
                          newUrl += "&mode="+animetype;
                        }
                        if(animeregion!=""){
                          newUrl += "&stage="+animeregion;
                        }
                        if(animedecade!=""){
                          newUrl += "&sector="+animedecade;
                        }
                        if(animelanguage != ""){
                          newUrl += "&board="+animelanguage
                        }
                    }else{
                      newUrl =url + "?page="+ret.pagenum;
                      if (animetype!=""){
                          newUrl += "&mode="+animetype;
                        }
                        if(animeregion!=""){
                          newUrl += "&stage="+animeregion;
                        }
                        if(animedecade!=""){
                          newUrl += "&sector="+animedecade;
                        }
                        if(animelanguage != ""){
                          newUrl += "&board="+animelanguage
                        }
                    }
                    history.pushState(stateObject,title,newUrl);




                    },
                     error:function(data)
                    {
                      alert(data);
                    }
                    });
                    }
                  }
                </script>
                <ul>
                  <li style="height: 90px;list-style:none;">
                  <h1>总共{{count}}条数据</h1>
                  </li>
                </ul>
  						</div>
  					</div>
  			</div>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
  </body>
</html>
